let roomFormSelector=".form-room",roomInputSelector=".form-room__field",roomBtnSelector=".form-room__btn",roomFromPickerSelector=".form-room__field-from",roomBeforePickerSelector=".form-room__field-before",roomErrorMessage=".item-room__error",okMessage=document.querySelector(".message-rooms"),okFrom=okMessage.querySelector(".message-rooms__from"),okBefore=okMessage.querySelector(".message-rooms__before"),okBtn=okMessage.querySelector(".message-rooms__ok");class RoomManager{constructor(e,o){this.id=o,this.initFromHtml(e,o)}initFromHtml(e,o){let r=e.querySelector(roomFormSelector),t=e.querySelectorAll(roomInputSelector),a=e.querySelector(roomBtnSelector),m=e.querySelector(roomErrorMessage),s=datepicker(e.querySelector(roomFromPickerSelector),{id:o,startDay:1,customDays:["ВС","ПН","ВТ","СР","ЧТ","ПТ","СБ"],customMonths:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],overlayButton:"Введите дату",overlayPlaceholder:"Введите год (4 цифры)",disabler:function(e){if(!localStorage[o])return!1;{let r=JSON.parse(localStorage[o]).start,t=JSON.parse(localStorage[o]).end;if(e>=Date.parse(r)&&e<=Date.parse(t))return!0}},formatter:(e,o,r)=>{const t=o.getDate()+" "+["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][o.getMonth()]+" "+o.getFullYear();e.value=t},maxDate:new Date(2099,0,5)}),l=datepicker(e.querySelector(roomBeforePickerSelector),{id:o,startDay:1,customDays:["ВС","ПН","ВТ","СР","ЧТ","ПТ","СБ"],customMonths:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],overlayButton:"Введите дату",overlayPlaceholder:"Введите год (4 цифры)",disabler:function(e){if(!localStorage[o])return!1;{let r=JSON.parse(localStorage[o]).start,t=JSON.parse(localStorage[o]).end;if(e>=Date.parse(r)&&e<=Date.parse(t))return!0}},formatter:(e,o,r)=>{const t=o.getDate()+" "+["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][o.getMonth()]+" "+o.getFullYear();e.value=t},maxDate:new Date(2099,0,5)});this.id=o,this.inputs=t,this.form=r,this.submitBtn=a,this.fromPicker=s,this.beforePicker=l;let n=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];this.submitBtn.addEventListener("click",e=>{e.preventDefault();let o=this.beforePicker.getRange().start,r=this.beforePicker.getRange().end;o&&r?(m.classList.remove("active"),localStorage.setItem(this.id,JSON.stringify({start:o,end:r})),okMessage.classList.add("active"),okFrom.innerHTML=okFrom.dataset.text+o.getDate()+" "+n[o.getMonth()],okBefore.innerHTML=okBefore.dataset.text+r.getDate()+" "+n[r.getMonth()],okBtn.onclick=()=>{this.form.submit()},console.log(localStorage)):(m.classList.add("active"),e.preventDefault())})}}let roomA=new RoomManager(document.getElementById("room-A"),"room-A"),roomB=new RoomManager(document.getElementById("room-B"),"room-B"),roomC=new RoomManager(document.getElementById("room-C"),"room-C"),roomD=new RoomManager(document.getElementById("room-D"),"room-D"),roomE=new RoomManager(document.getElementById("room-E"),"room-E");