/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/modules/index.ts":
/*!*********************************!*\
  !*** ./src/js/modules/index.ts ***!
  \*********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.testWebP = void 0;
var webp_1 = __webpack_require__(/*! ./webp */ "./src/js/modules/webp.ts");
Object.defineProperty(exports, "testWebP", ({ enumerable: true, get: function () { return __importDefault(webp_1).default; } }));


/***/ }),

/***/ "./src/js/modules/webp.ts":
/*!********************************!*\
  !*** ./src/js/modules/webp.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
function testWebP(callback) {
    const webP = new Image();
    webP.onload = webP.onerror = function () {
        callback(webP.height == 2);
    };
    webP.src =
        "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
}
exports["default"] = testWebP;


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;
/*!***********************!*\
  !*** ./src/js/app.ts ***!
  \***********************/

Object.defineProperty(exports, "__esModule", ({ value: true }));
const modules_1 = __webpack_require__(/*! ./modules */ "./src/js/modules/index.ts");
window.addEventListener("DOMContentLoaded", () => {
    (0, modules_1.testWebP)(function (support) {
        if (support == true) {
            document.documentElement.classList.add("webp");
        }
        else {
            document.documentElement.classList.add("no-webp");
        }
    });
});
const tableToggler = () => {
    const toggleBtns = document.querySelectorAll(".first-td__arrow");
    for (let btn of toggleBtns) {
        btn.addEventListener("click", (e) => {
            const target = e.target;
            if (target &&
                (target instanceof HTMLElement || target instanceof SVGElement)) {
                const tr = target.closest("tr"); // находим родительскую tr
                btn.classList.toggle("active");
                if (tr && tr instanceof HTMLElement) {
                    let box = [], next = tr.nextElementSibling;
                    // собираем все tr с классом dropdown-tr в массив box
                    while (next &&
                        next.classList.contains("dropdown-tr") &&
                        next instanceof HTMLElement) {
                        box.push(next);
                        next = next.nextElementSibling;
                    }
                    // добавляем или удаляем класс для показа
                    box.forEach(function (item) {
                        item.classList.toggle("show");
                    });
                }
            }
        });
    }
};
const mouseEventHandler = (element, eventName, list, dataAtrName) => {
    element.addEventListener(eventName, (e) => {
        const target = e.target;
        const index = target.dataset.iconIndex;
        list.forEach((item) => {
            if (item instanceof HTMLElement) {
                const findIndex = item.dataset[dataAtrName];
                if (findIndex === index) {
                    switch (eventName) {
                        case "focus":
                            item.classList.add("focus");
                            break;
                        case "mouseenter":
                            item.classList.add("focus");
                            break;
                        default: {
                            item.classList.remove("focus");
                        }
                    }
                }
            }
        });
    });
};
const handleChangeCheckboxValue = (value, selector) => {
    const checkboxes = document.querySelectorAll(selector);
    checkboxes.forEach((checkbox) => {
        if (checkbox instanceof HTMLInputElement) {
            checkbox.checked = value;
        }
    });
};
const handleIconHover = () => {
    const icons = document.querySelectorAll(".dropdown-tr__icon");
    for (let icon of icons) {
        mouseEventHandler(icon, "mouseenter", icons, "iconIndex");
        mouseEventHandler(icon, "mouseleave", icons, "iconIndex");
        mouseEventHandler(icon, "focus", icons, "iconIndex");
        mouseEventHandler(icon, "blur", icons, "iconIndex");
    }
};
const handleSelectAll = () => {
    const mainCheckbox = document.querySelector(".checkbox_all");
    if (mainCheckbox && mainCheckbox instanceof HTMLInputElement) {
        mainCheckbox.addEventListener("change", (e) => {
            if (mainCheckbox.checked) {
                handleChangeCheckboxValue(true, ".checkbox_row");
            }
            else {
                handleChangeCheckboxValue(false, ".checkbox_row");
            }
        });
    }
};
const setColspanStickyTDs = (value) => {
    const dropdownStickyTDs = document.querySelectorAll(".dropdown-tr__sticky");
    dropdownStickyTDs.forEach((element) => {
        if (element instanceof HTMLTableCellElement) {
            element.colSpan = value;
        }
    });
};
let shownFilter = false;
const handleShowTableFilter = () => {
    const filterBtn = document.querySelector(".table__icon-btn_filter");
    const secondTDs = document.querySelectorAll(".second-td");
    filterBtn === null || filterBtn === void 0 ? void 0 : filterBtn.addEventListener("click", () => {
        secondTDs.forEach((elem) => {
            if (elem instanceof HTMLElement) {
                const currentDisplayState = elem.style.display;
                if (currentDisplayState) {
                    elem.style.display = "";
                    setColspanStickyTDs(1);
                    shownFilter = false;
                }
                else {
                    elem.style.display = "table-cell";
                    setColspanStickyTDs(2);
                    shownFilter = true;
                }
            }
        });
    });
};
const handleResize = () => {
    if (window.matchMedia("(max-width: 768px)").matches) {
        if (shownFilter) {
            console.log("shown");
            setColspanStickyTDs(2);
        }
        else {
            console.log("shown false");
            setColspanStickyTDs(1);
        }
    }
};
window.addEventListener("DOMContentLoaded", () => {
    handleResize();
    tableToggler();
    handleIconHover();
    handleSelectAll();
    handleShowTableFilter();
});
window.addEventListener("resize", (e) => {
    handleResize();
});

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDckIsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDeEI7YUFBTTtZQUNMLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDM0IsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDeEI7S0FDRjtBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7SUFDL0MsWUFBWSxFQUFFLENBQUM7SUFDZixZQUFZLEVBQUUsQ0FBQztJQUNmLGVBQWUsRUFBRSxDQUFDO0lBQ2xCLGVBQWUsRUFBRSxDQUFDO0lBQ2xCLHFCQUFxQixFQUFFLENBQUM7QUFDMUIsQ0FBQyxDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7SUFDdEMsWUFBWSxFQUFFLENBQUM7QUFDakIsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndWxwLy4vc3JjL2pzL21vZHVsZXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vZ3VscC8uL3NyYy9qcy9tb2R1bGVzL3dlYnAudHMiLCJ3ZWJwYWNrOi8vZ3VscC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9ndWxwLy4vc3JjL2pzL2FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBkZWZhdWx0IGFzIHRlc3RXZWJQIH0gZnJvbSBcIi4vd2VicFwiO1xyXG4iLCJ0eXBlIFRDYWxsYmFjayA9IChzdXBwb3J0OiBib29sZWFuKSA9PiB2b2lkO1xyXG5cclxuZnVuY3Rpb24gdGVzdFdlYlAoY2FsbGJhY2s6IFRDYWxsYmFjaykge1xyXG4gIGNvbnN0IHdlYlAgPSBuZXcgSW1hZ2UoKTtcclxuICB3ZWJQLm9ubG9hZCA9IHdlYlAub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNhbGxiYWNrKHdlYlAuaGVpZ2h0ID09IDIpO1xyXG4gIH07XHJcbiAgd2ViUC5zcmMgPVxyXG4gICAgXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFVrbEdSam9BQUFCWFJVSlFWbEE0SUM0QUFBQ3lBZ0NkQVNvQ0FBSUFMbWswbWswaUlpSWlJZ0JvU3lnQUJjNldXZ0FBL3ZlZmYvMFBQOGJBLy9Md1lBQUFcIjtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgdGVzdFdlYlA7XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQgeyB0ZXN0V2ViUCB9IGZyb20gXCIuL21vZHVsZXNcIjtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgdGVzdFdlYlAoZnVuY3Rpb24gKHN1cHBvcnQpIHtcclxuICAgIGlmIChzdXBwb3J0ID09IHRydWUpIHtcclxuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ3ZWJwXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJuby13ZWJwXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IHRhYmxlVG9nZ2xlciA9ICgpID0+IHtcclxuICBjb25zdCB0b2dnbGVCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5maXJzdC10ZF9fYXJyb3dcIik7XHJcblxyXG4gIGZvciAobGV0IGJ0biBvZiB0b2dnbGVCdG5zKSB7XHJcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG5cclxuICAgICAgaWYgKFxyXG4gICAgICAgIHRhcmdldCAmJlxyXG4gICAgICAgICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCB0YXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KVxyXG4gICAgICApIHtcclxuICAgICAgICBjb25zdCB0ciA9IHRhcmdldC5jbG9zZXN0KFwidHJcIik7IC8vINC90LDRhdC+0LTQuNC8INGA0L7QtNC40YLQtdC70YzRgdC60YPRjiB0clxyXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICBpZiAodHIgJiYgdHIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgICAgbGV0IGJveCA9IFtdIGFzIEhUTUxFbGVtZW50W10sXHJcbiAgICAgICAgICAgIG5leHQgPSB0ci5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblxyXG4gICAgICAgICAgLy8g0YHQvtCx0LjRgNCw0LXQvCDQstGB0LUgdHIg0YEg0LrQu9Cw0YHRgdC+0LwgZHJvcGRvd24tdHIg0LIg0LzQsNGB0YHQuNCyIGJveFxyXG4gICAgICAgICAgd2hpbGUgKFxyXG4gICAgICAgICAgICBuZXh0ICYmXHJcbiAgICAgICAgICAgIG5leHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZHJvcGRvd24tdHJcIikgJiZcclxuICAgICAgICAgICAgbmV4dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgYm94LnB1c2gobmV4dCk7XHJcbiAgICAgICAgICAgIG5leHQgPSBuZXh0Lm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyDQtNC+0LHQsNCy0LvRj9C10Lwg0LjQu9C4INGD0LTQsNC70Y/QtdC8INC60LvQsNGB0YEg0LTQu9GPINC/0L7QutCw0LfQsFxyXG4gICAgICAgICAgYm94LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgbW91c2VFdmVudEhhbmRsZXIgPSAoXHJcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXHJcbiAgZXZlbnROYW1lOiBcIm1vdXNlZW50ZXJcIiB8IFwibW91c2VsZWF2ZVwiIHwgXCJmb2N1c1wiIHwgXCJibHVyXCIsXHJcbiAgbGlzdDogTm9kZUxpc3RPZjxFbGVtZW50PixcclxuICBkYXRhQXRyTmFtZTogc3RyaW5nXHJcbikgPT4ge1xyXG4gIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIChlKSA9PiB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgIGNvbnN0IGluZGV4ID0gdGFyZ2V0LmRhdGFzZXQuaWNvbkluZGV4O1xyXG5cclxuICAgIGxpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZmluZEluZGV4ID0gaXRlbS5kYXRhc2V0W2RhdGFBdHJOYW1lXTtcclxuICAgICAgICBpZiAoZmluZEluZGV4ID09PSBpbmRleCkge1xyXG4gICAgICAgICAgc3dpdGNoIChldmVudE5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImZvY3VzXCI6XHJcbiAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwiZm9jdXNcIik7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwibW91c2VlbnRlclwiOlxyXG4gICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImZvY3VzXCIpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImZvY3VzXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZUNoYW5nZUNoZWNrYm94VmFsdWUgPSAodmFsdWU6IGJvb2xlYW4sIHNlbGVjdG9yOiBzdHJpbmcpID0+IHtcclxuICBjb25zdCBjaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcblxyXG4gIGNoZWNrYm94ZXMuZm9yRWFjaCgoY2hlY2tib3gpID0+IHtcclxuICAgIGlmIChjaGVja2JveCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlSWNvbkhvdmVyID0gKCkgPT4ge1xyXG4gIGNvbnN0IGljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kcm9wZG93bi10cl9faWNvblwiKTtcclxuICBmb3IgKGxldCBpY29uIG9mIGljb25zKSB7XHJcbiAgICBtb3VzZUV2ZW50SGFuZGxlcihpY29uIGFzIEhUTUxFbGVtZW50LCBcIm1vdXNlZW50ZXJcIiwgaWNvbnMsIFwiaWNvbkluZGV4XCIpO1xyXG4gICAgbW91c2VFdmVudEhhbmRsZXIoaWNvbiBhcyBIVE1MRWxlbWVudCwgXCJtb3VzZWxlYXZlXCIsIGljb25zLCBcImljb25JbmRleFwiKTtcclxuICAgIG1vdXNlRXZlbnRIYW5kbGVyKGljb24gYXMgSFRNTEVsZW1lbnQsIFwiZm9jdXNcIiwgaWNvbnMsIFwiaWNvbkluZGV4XCIpO1xyXG4gICAgbW91c2VFdmVudEhhbmRsZXIoaWNvbiBhcyBIVE1MRWxlbWVudCwgXCJibHVyXCIsIGljb25zLCBcImljb25JbmRleFwiKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVTZWxlY3RBbGwgPSAoKSA9PiB7XHJcbiAgY29uc3QgbWFpbkNoZWNrYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVja2JveF9hbGxcIik7XHJcblxyXG4gIGlmIChtYWluQ2hlY2tib3ggJiYgbWFpbkNoZWNrYm94IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xyXG4gICAgbWFpbkNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGUpID0+IHtcclxuICAgICAgaWYgKG1haW5DaGVja2JveC5jaGVja2VkKSB7XHJcbiAgICAgICAgaGFuZGxlQ2hhbmdlQ2hlY2tib3hWYWx1ZSh0cnVlLCBcIi5jaGVja2JveF9yb3dcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGFuZGxlQ2hhbmdlQ2hlY2tib3hWYWx1ZShmYWxzZSwgXCIuY2hlY2tib3hfcm93XCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBzZXRDb2xzcGFuU3RpY2t5VERzID0gKHZhbHVlOiBudW1iZXIpID0+IHtcclxuICBjb25zdCBkcm9wZG93blN0aWNreVREcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZHJvcGRvd24tdHJfX3N0aWNreVwiKTtcclxuXHJcbiAgZHJvcGRvd25TdGlja3lURHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MVGFibGVDZWxsRWxlbWVudCkge1xyXG4gICAgICBlbGVtZW50LmNvbFNwYW4gPSB2YWx1ZTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbmxldCBzaG93bkZpbHRlciA9IGZhbHNlO1xyXG5cclxuY29uc3QgaGFuZGxlU2hvd1RhYmxlRmlsdGVyID0gKCkgPT4ge1xyXG4gIGNvbnN0IGZpbHRlckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBcIi50YWJsZV9faWNvbi1idG5fZmlsdGVyXCJcclxuICApIGFzIEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbDtcclxuXHJcbiAgY29uc3Qgc2Vjb25kVERzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWNvbmQtdGRcIik7XHJcblxyXG4gIGZpbHRlckJ0bj8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHNlY29uZFREcy5mb3JFYWNoKChlbGVtKSA9PiB7XHJcbiAgICAgIGlmIChlbGVtIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGlzcGxheVN0YXRlID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudERpc3BsYXlTdGF0ZSkge1xyXG4gICAgICAgICAgZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcclxuICAgICAgICAgIHNldENvbHNwYW5TdGlja3lURHMoMSk7XHJcbiAgICAgICAgICBzaG93bkZpbHRlciA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSBcInRhYmxlLWNlbGxcIjtcclxuICAgICAgICAgIHNldENvbHNwYW5TdGlja3lURHMoMik7XHJcbiAgICAgICAgICBzaG93bkZpbHRlciA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcclxuICBpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiA3NjhweClcIikubWF0Y2hlcykge1xyXG4gICAgaWYgKHNob3duRmlsdGVyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwic2hvd25cIik7XHJcbiAgICAgIHNldENvbHNwYW5TdGlja3lURHMoMik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcInNob3duIGZhbHNlXCIpO1xyXG4gICAgICBzZXRDb2xzcGFuU3RpY2t5VERzKDEpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgaGFuZGxlUmVzaXplKCk7XHJcbiAgdGFibGVUb2dnbGVyKCk7XHJcbiAgaGFuZGxlSWNvbkhvdmVyKCk7XHJcbiAgaGFuZGxlU2VsZWN0QWxsKCk7XHJcbiAgaGFuZGxlU2hvd1RhYmxlRmlsdGVyKCk7XHJcbn0pO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKGUpID0+IHtcclxuICBoYW5kbGVSZXNpemUoKTtcclxufSk7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==